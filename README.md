# process-logger

---

**process-logger** — кроссплатформенная программа на C/C++ для управления счетчиком и ведения лог-файла. Программа поддерживает запуск в нескольких экземплярах, синхронизацию счетчика через лог-файл и порождение дочерних процессов с определенной логикой. Поддерживается как Windows, так и POSIX-совместимые системы.

---

## Основные возможности

1. **Ведение лог-файла**:
   - При старте программа открывает лог-файл и записывает в него идентификатор процесса (PID) и время запуска.
   - Раз в 1 секунду записывает текущее время, PID и значение счетчика.

2. **Управление счетчиком**:
   - Счетчик автоматически увеличивается на 1 каждые 300 мс.
   - Пользователь может установить любое значение счетчика через командную строку.

3. **Порождение дочерних процессов**:
   - Раз в 3 секунды программа запускает 2 копии: 
     - **Копия 1**: Увеличивает счетчик на 10, записывает время выхода и завершается.
     - **Копия 2**: Увеличивает счетчик в 2 раза, ждет 2 секунды, уменьшает счетчик в 2 раза, записывает время выхода и завершается.
   - Если копия еще не завершила работу, программа записывает сообщение в лог.

4. **Многоэкземплярность**:
   - Пользователь может запустить любое количество программ.
   - Только одна программа ведет лог и порождает копии, но все программы автоматически увеличивают счетчик и позволяют изменять его через командную строку.

---

## Содержание файлов проекта
1. **my_shmem.hpp**: библиотека с реализацией разделяемой памяти процессов.
2. **test.cpp**: создание структуры разделяемой памяти, основной цикл программы в котором идет увеличение счетчика каждые 300мс, вывод в лог-файл значения счетчика каждую 1сек, запуск создания 2-х дочерних процессов child.exe каждые 3сек.
3. **child.cpp**: подключение к разделяемой памяти, изменение счетчика, вывод в лог-файл информации о начале и завершении процесса.
4. **common.cpp** и **common.hpp**: вынесенный общий функционал программ child.cpp и test.cpp и заголовки этого файла соответственно.
